<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tech | Hasinova</title>

  <link rel="stylesheet" href="../assets/css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-dark:#1a1a1d;
      --bg-mid:#2a2a2e;
      --muted:#a9a9b0;
    }

    /* Background: grid + noise */
    html,body { height:100%; margin:0; }
    body {
      font-family:"Poppins",system-ui;
      background:
        url("https://transparenttextures.com/patterns/asfalt-light.png"),
        linear-gradient(180deg, rgba(255,255,255,0.04) 1px, transparent 1px),
        linear-gradient(90deg, rgba(255,255,255,0.04) 1px, transparent 1px),
        linear-gradient(180deg, var(--bg-dark), var(--bg-mid));
      background-size:
        220px 220px,
        28px 28px,
        28px 28px,
        cover;
      color:#efefef;
      min-height:100vh;
      padding:32px 20px;
      display:flex;
      flex-direction:column;
      align-items:center;
    }

    .container { width:100%; max-width:1100px; }

    header {
      display:flex;
      justify-content:space-between;
      align-items:center;
      margin-bottom:30px;
    }

    .logo a{
      text-decoration:none;
      color:#fff;
      font-weight:700;
      font-size:1.2rem;
    }
    nav a{
      color:var(--muted);
      margin-left:16px;
      text-decoration:none;
      font-weight:600;
    }
    nav a:hover { color:#fff; }

    /* Title area */
    .title-wrap {
      margin-bottom:26px;
    }
    h1 {
      margin:0;
      font-size:1.7rem;
      color:#fff;
    }
    .subtitle {
      margin:5px 0 0;
      color:var(--muted);
      font-size:0.95rem;
    }

    /* Posts Grid */
    .cards {
      display:grid;
      grid-template-columns:repeat(auto-fit, minmax(260px,1fr));
      gap:20px;
    }

    .card {
      background:rgba(255,255,255,0.03);
      border:1px solid rgba(255,255,255,0.05);
      border-radius:14px;
      overflow:hidden;
      backdrop-filter: blur(4px);
      transition:transform .2s ease, box-shadow .2s ease;
      display:flex;
      flex-direction:column;
      min-height:260px;
    }
    .card:hover {
      transform:translateY(-6px);
      box-shadow:0 12px 32px rgba(0,0,0,0.5);
    }

    .thumb {
      width:100%;
      height:135px;
      object-fit:cover;
    }

    .card-body {
      padding:15px;
      display:flex;
      flex-direction:column;
      gap:10px;
      flex:1;
    }

    .card h3 {
      margin:0;
      color:#fff;
      font-size:1.1rem;
    }
    .card h3 a {
      color:inherit;
      text-decoration:none;
    }
    .card h3 a:hover { text-decoration:underline; }

    .excerpt {
      color:var(--muted);
      font-size:0.92rem;
      line-height:1.4;
      flex:1;
    }

    .meta {
      display:flex;
      justify-content:space-between;
      color:var(--muted);
      font-size:0.83rem;
      margin-top:12px;
    }

    .cat {
      padding:4px 8px;
      border-radius:6px;
      background:rgba(255,255,255,0.05);
      border:1px solid rgba(255,255,255,0.08);
    }

    .notice {
      display:none;
      padding:20px;
      color:var(--muted);
      text-align:center;
    }
  </style>
</head>

<body>
  <div class="container">
    <header>
      <div class="logo"><a href="../index.html">HASI<span style="opacity:.9">NOVA</span></a></div>
      <nav>
        <a href="../index.html">Home</a>
        <a href="techindex.html" style="color:#fff;">Tech</a>
        <a href="../poems/poemsindex.html">Poems</a>
        <a href="../about.html">About</a>
        <a href="../contact.html">Contact</a>
      </nav>
    </header>

    <div class="title-wrap">
      <h1>Tech</h1>
      <p class="subtitle">notes, experiments and my progress in coding</p>
    </div>

    <section id="postsSection">
      <div id="cards" class="cards"></div>
      <div id="notice" class="notice">Loading postsâ€¦</div>
    </section>
  </div>

  <script>
    const postsFile = "../assets/data/posts.json";
    const cards = document.getElementById("cards");
    const notice = document.getElementById("notice");

    notice.style.display = "block";

    fetch(postsFile)
      .then(res => {
        if (!res.ok) throw new Error("posts.json missing");
        return res.json();
      })
      .then(posts => {
        notice.style.display = "none";

        const techPosts = posts.filter(p =>
          (p.category || "").toLowerCase().includes("tech")
        );

        if (techPosts.length === 0) {
          notice.style.display = "block";
          notice.textContent = "No tech posts yet.";
          return;
        }

        techPosts.sort((a,b) => new Date(b.date) - new Date(a.date));

        techPosts.forEach(post => {
          const href = "../" + post.link;
          const thumb = "../assets/images/" + post.thumbnail;

          // preview snippet (first 22 words)
          let preview = post.excerpt || "";
          preview = preview.split(" ").slice(0, 22).join(" ") + "...";

          const el = document.createElement("article");
          el.className = "card";

          el.innerHTML = `
            <a href="${href}">
              <img class="thumb" src="${thumb}" alt="${post.title}">
            </a>
            <div class="card-body">
              <h3><a href="${href}">${post.title}</a></h3>
              <div class="excerpt">${preview}</div>
              <div class="meta">
                <div class="cat">${post.category}</div>
                <div class="date">${new Date(post.date).toLocaleDateString()}</div>
              </div>
            </div>
          `;

          cards.appendChild(el);
        });
      })
      .catch(() => {
        notice.style.display = "block";
        notice.textContent = "Couldn't load posts.json.";
      });
  </script>
</body>
</html>
